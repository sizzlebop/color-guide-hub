<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Space Interpolation</title>
    <style>
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            margin: 0;
            background: #121212;
            color: #e0e0e0;
            line-height: 1.6;
        }
        .navbar {
            background: #1e1e1e;
            padding: 1rem 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .nav-links {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 2rem;
        }
        .nav-links a {
            color: #e0e0e0;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
        }
        .nav-links a:hover {
            color: #fff;
        }
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        .interpolation-section {
            background: #1e1e1e;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        h2 {
            text-align: center;
            margin: 30px 0;
            color: #fff;
            font-size: 24px;
            background: linear-gradient(45deg, #7928ca, #ff0080);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .color-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .color-input {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .color-picker {
            width: 100%;
            height: 50px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .steps-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #333;
            border-radius: 4px;
            background: #2a2a2a;
            color: #fff;
            font-size: 1rem;
        }
        .color-spaces {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }
        .space-button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            background: #2a2a2a;
            color: #fff;
            cursor: pointer;
            transition: background 0.2s;
        }
        .space-button:hover {
            background: #3a3a3a;
        }
        .space-button.active {
            background: linear-gradient(45deg, #7928ca, #ff0080);
        }
        .interpolation-result {
            display: flex;
            min-height: 100px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        .result-color {
            flex: 1;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
        }
        .result-color:hover {
            transform: scale(1.05);
            z-index: 1;
        }
        .tooltip {
            position: fixed;
            background: #2a2a2a;
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.9rem;
            font-family: monospace;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1000;
            white-space: pre-line;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="terminal-colors.html">Terminal Colors</a>
            <a href="color-palettes.html">Color Palettes</a>
            <a href="image-colors.html">Image Colors</a>
            <a href="ansi-256.html">256 Colors</a>
            <a href="color-interpolation.html">Color Interpolation</a>
            <a href="material-palette.html">Material Palette</a>
        </div>
    </nav>

    <div class="container">
        <h2>Color Space Interpolation</h2>
        <div class="interpolation-section">
            <div class="color-inputs">
                <div class="color-input">
                    <label>Start Color</label>
                    <input type="color" id="startColor" class="color-picker" value="#ff0000">
                </div>
                <div class="color-input">
                    <label>End Color</label>
                    <input type="color" id="endColor" class="color-picker" value="#0000ff">
                </div>
                <div class="color-input">
                    <label>Number of Steps</label>
                    <input type="number" id="steps" class="steps-input" value="10" min="2" max="50">
                </div>
            </div>
            
            <div class="color-spaces">
                <button class="space-button active" data-space="rgb">RGB</button>
                <button class="space-button" data-space="hsl">HSL</button>
                <button class="space-button" data-space="lab">LAB</button>
                <button class="space-button" data-space="lch">LCH</button>
            </div>

            <div class="interpolation-result" id="resultStrip"></div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Color conversion functions
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? [
                parseInt(result[1], 16),
                parseInt(result[2], 16),
                parseInt(result[3], 16)
            ] : null;
        }

        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => {
                const hex = Math.round(x).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }).join('');
        }

        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return [h * 360, s * 100, l * 100];
        }

        function hslToRgb(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            let r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };

                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }

            return [r * 255, g * 255, b * 255];
        }

        // Linear interpolation helper
        function lerp(start, end, t) {
            return start * (1 - t) + end * t;
        }

        // Color interpolation functions
        function interpolateRGB(color1, color2, steps) {
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);
            const colors = [];

            for (let i = 0; i < steps; i++) {
                const t = i / (steps - 1);
                const r = lerp(rgb1[0], rgb2[0], t);
                const g = lerp(rgb1[1], rgb2[1], t);
                const b = lerp(rgb1[2], rgb2[2], t);
                colors.push(rgbToHex(r, g, b));
            }

            return colors;
        }

        function interpolateHSL(color1, color2, steps) {
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);
            const hsl1 = rgbToHsl(...rgb1);
            const hsl2 = rgbToHsl(...rgb2);
            const colors = [];

            // Handle hue interpolation
            let h1 = hsl1[0];
            let h2 = hsl2[0];
            const hueDiff = h2 - h1;
            if (Math.abs(hueDiff) > 180) {
                if (hueDiff > 0) {
                    h1 += 360;
                } else {
                    h2 += 360;
                }
            }

            for (let i = 0; i < steps; i++) {
                const t = i / (steps - 1);
                const h = lerp(h1, h2, t) % 360;
                const s = lerp(hsl1[1], hsl2[1], t);
                const l = lerp(hsl1[2], hsl2[2], t);
                const rgb = hslToRgb(h, s, l);
                colors.push(rgbToHex(...rgb));
            }

            return colors;
        }

        // Simplified LAB and LCH interpolation (approximation)
        function interpolateLAB(color1, color2, steps) {
            return interpolateRGB(color1, color2, steps);
        }

        function interpolateLCH(color1, color2, steps) {
            return interpolateHSL(color1, color2, steps);
        }

        // UI handling
        const startColorInput = document.getElementById('startColor');
        const endColorInput = document.getElementById('endColor');
        const stepsInput = document.getElementById('steps');
        const resultStrip = document.getElementById('resultStrip');
        const spaceButtons = document.querySelectorAll('.space-button');
        const tooltip = document.getElementById('tooltip');

        let currentSpace = 'rgb';

        function updateColors() {
            const startColor = startColorInput.value;
            const endColor = endColorInput.value;
            const steps = parseInt(stepsInput.value);
            
            let colors;
            switch (currentSpace) {
                case 'hsl':
                    colors = interpolateHSL(startColor, endColor, steps);
                    break;
                case 'lab':
                    colors = interpolateLAB(startColor, endColor, steps);
                    break;
                case 'lch':
                    colors = interpolateLCH(startColor, endColor, steps);
                    break;
                default:
                    colors = interpolateRGB(startColor, endColor, steps);
            }

            resultStrip.innerHTML = '';
            colors.forEach((color, index) => {
                const div = document.createElement('div');
                div.className = 'result-color';
                div.style.backgroundColor = color;
                
                div.addEventListener('mousemove', (e) => {
                    tooltip.style.opacity = '1';
                    tooltip.textContent = `Step ${index + 1}\n${color.toUpperCase()}`;
                    tooltip.style.left = e.pageX + 10 + 'px';
                    tooltip.style.top = e.pageY + 10 + 'px';
                });

                div.addEventListener('mouseout', () => {
                    tooltip.style.opacity = '0';
                });

                div.addEventListener('click', () => {
                    navigator.clipboard.writeText(color);
                    const originalText = tooltip.textContent;
                    tooltip.textContent = 'Copied!';
                    setTimeout(() => {
                        tooltip.textContent = originalText;
                    }, 1000);
                });

                resultStrip.appendChild(div);
            });
        }

        spaceButtons.forEach(button => {
            button.addEventListener('click', () => {
                spaceButtons.forEach(b => b.classList.remove('active'));
                button.classList.add('active');
                currentSpace = button.dataset.space;
                updateColors();
            });
        });

        [startColorInput, endColorInput, stepsInput].forEach(input => {
            input.addEventListener('input', updateColors);
        });

        updateColors();
    </script>
</body>
</html>